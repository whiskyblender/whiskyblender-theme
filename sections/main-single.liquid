{{ 'fonts-wb.css' | asset_url | stylesheet_tag }}
{{ 'main.css' | asset_url | stylesheet_tag }}
{{ 'home.css' | asset_url | stylesheet_tag }}
{{ 'lab.css' | asset_url | stylesheet_tag }}
{{ 'shop.css' | asset_url | stylesheet_tag }}
{{ 'basket.css' | asset_url | stylesheet_tag }}

<section class="standard">
  <article class="hang-right">
    <div class="bump">
      <h4>
        <a class="any-link breadcrumb" aria="Breadcrumb" href="/"> Home</a>
        /
        <a class="any-link breadcrumb" aria-label="Breadcrumb" href="/pages/shop"> Shop</a>
        /
        <a class="any-link breadcrumb" aria-label="Breadcrumb" href="/collections"> Collections</a>
        /
        {% for collection in product.collections %}
          {% unless collection.handle == 'promoted' %}
            <a class="any-link breadcrumb" aria-label="Breadcrumb" href="{{ collection.url }}">
              {{- collection.title -}}
            </a>
          {% endunless %}
        {% endfor %}
      </h4>

      <h3>{{ product.title }}</h3>
      <ul class="product-summary">
        {% if product.type != blank %}
          <li>{{ product.type }}</li>
        {% endif %}
        {% for option in product.options_with_values %}
          {% if option.name == 'Size' %}
            <li>
              {% for value in option.values %}
                {%- if forloop.length > 0 -%}
                  {{ value }}
                  {% unless forloop.last %}/{% endunless %}
                {% endif %}
              {% endfor %}
            </li>
          {% endif %}
        {% endfor %}
        {% if product.metafields.custom.abv != blank %}
          <li>{{ product.metafields.custom.abv }} abv</li>
        {% endif %}
      </ul>
      <ul class="socials">
        <li>
          <a
            class="x"
            href="https://twitter.com/share?url=whiskyblender.com/WB53711&amp;text=I made my own blend on @whisky_blender. Check it out!"
            target="_blank"
            >X</a
          >
        </li>
        <li>
          <a
            class="facebook"
            href="https://www.facebook.com/sharer/sharer.php?u=whiskyblender.com/WB53711"
            target="_blank"
            >Facebook</a
          >
        </li>
        <li>
          <a
            class="reddit"
            href="https://reddit.com/submit?url=whiskyblender.com/WB53711&amp;title=I made my own blend on whiskyblender.com"
            target="_blank"
            >Reddit</a
          >
        </li>
        <li>
          <a
            class="linkedin"
            href="https://www.linkedin.com/shareArticle?url=whiskyblender.com/WB53711&amp;title=My own whisky&amp;summary=I made my own blend on whiskyblender.com&amp;source=whiskyblender.com"
            target="_blank"
            >LinkedIn</a
          >
        </li>
        <li>
          <a
            class="email"
            href="mailto:?subject=My own whisky&amp;body=I made my own blend on @whisky_blender. Check it out! whiskyblender.com/WB5371"
            target="_blank"
            >Email</a
          >
        </li>
      </ul>
      <div class="product-choices">
        {% assign product_description_array = product.description | split: '<p>' %}
        {% assign total_possible = 20 %}
        {% assign descriptions = '' %}
        {% assign values = '' %}

        {% for description in product_description_array %}
          {% if description != blank %}
            {% assign description_parts = description | split: ':' %}
            {% assign text = description_parts[0] | strip %}
            {% assign numeric_value = description_parts[1] | strip | remove: 'cl' | plus: 0 %}

            {% assign descriptions = descriptions | append: text | append: ',' %}
            {% assign values = values | append: numeric_value | append: ',' %}
          {% endif %}
        {% endfor %}

        {% assign descriptions_array = descriptions | split: ',' | slice: 0, descriptions.size | reverse %}
        {% assign values_array = values | split: ',' | slice: 0, values.size | reverse %}

        <style>
          .progress-bar {
              width: 100%;
              background-color: #f3f3f3;
              border-radius: 5px;
              margin-bottom: 10px;
              color:black;
               margin: 8px 0;
              height: 44px;
              display: flex;
              align-items: center;

          }
          .progress-bar-inner {
              height: 44px;
              border-radius: 5px;
              text-align: left;
              padding-right: 5px;
              line-height: 20px;
              color: white;
              background-color: #f3f3f3;
              transition: background-color 0.8s ease-in-out;
          }
        </style>

        {% for value in values_array %}
          {% assign percentage = value | times: 100 | divided_by: total_possible %}

          <div class="progress-bar">
            <div
              class="progress-bar-inner"
              data-name="{{descriptions_array[forloop.index0] | strip_html}}"
              style="width: {{ percentage }}%;"
            >
              {{ descriptions_array[forloop.index0] }}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    <div class="bottle-visuals">
      <!--
        <div class="bottle-image" style="background-image: url(images/shop/rendered-image.jpg);"><span class="product-mask"></span>
        </div>
      -->
      <div id="lab-bottle">
        <div class="bag-layer" style="opacity: 0;"></div>
        <!-- opacity = show on completion -->
        <div class="cap-layer" style="opacity: 1;"></div>
        <!-- opacity = show on completion -->
        <div class="label-layer" style="opacity: 1;">
          <!-- opacity = show on completion (include "scotch" class if contains grain) -->
          <div id="outer">
            <div class="text color1" style="font-size: 40.5px; line-height: 31.08px;">Best dram</div>
          </div>
          <div class="side">
            <div class="blender-name text color1" style="font-size: 50.5px; line-height: 38.11px;">The best man</div>
          </div>
        </div>
        <div class="mask-layer"></div>
        <div class="top-layer"></div>
        <div class="middle-layer"></div>
        <div class="bottom-layer" style="background: rgb(204, 174, 60);">
          <!-- background = colour of liquid -->
          <div class="liquid" style="height: 0%;"></div>
          <!-- height % = space left in bottle -->
        </div>
        <div class="base-layer"></div>
      </div>
    </div>
  </article>
</section>

{% render 'product-selector' %}

<style id="bar-colors"></style>

<script src="{{ 'main-single.js' | asset_url }}" defer="defer"></script>
